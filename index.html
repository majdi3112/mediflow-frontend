<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Expense Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .table-header {
            background-color: #f3f4f6; /* gray-100 */
        }
        .table-cell {
            padding: 0.75rem 1.5rem; /* py-3 px-6 */
            border-bottom: 1px solid #e5e7eb; /* gray-200 */
        }
        .summary-card {
            background-color: #ffffff;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .form-input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db; /* gray-300 */
        }
        .btn-primary {
            background-color: #4f46e5; /* indigo-600 */
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #4338ca; /* indigo-700 */
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            width: 90%;
            max-width: 500px;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900">Business Expense Tracker</h1>
            <p class="text-gray-600 mt-2">Track and manage all business-related spending for Mahmoud & Hamza.</p>
        </header>

        <!-- Summary Section -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="summary-card text-center">
                <h3 class="text-lg font-semibold text-gray-500">Total Spent</h3>
                <p id="total-spent" class="text-3xl font-bold text-gray-900 mt-2">$0.00</p>
            </div>
            <div class="summary-card text-center">
                <h3 class="text-lg font-semibold text-gray-500">Mahmoud's Contribution</h3>
                <p id="mahmoud-total" class="text-3xl font-bold text-indigo-600 mt-2">$0.00</p>
            </div>
            <div class="summary-card text-center">
                <h3 class="text-lg font-semibold text-gray-500">Hamza's Contribution</h3>
                <p id="hamza-total" class="text-3xl font-bold text-emerald-600 mt-2">$0.00</p>
            </div>
        </div>

        <!-- Add Expense Form -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-xl font-bold mb-4">Add New Expense</h2>
            <form id="expense-form" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                <div>
                    <label for="date" class="block text-sm font-medium text-gray-700">Date</label>
                    <input type="date" id="date" class="form-input mt-1" required>
                </div>
                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
                    <input type="text" id="description" placeholder="e.g., Office Supplies" class="form-input mt-1" required>
                </div>
                <div>
                    <label for="amount" class="block text-sm font-medium text-gray-700">Amount ($)</label>
                    <input type="number" id="amount" placeholder="0.00" step="0.01" class="form-input mt-1" required>
                </div>
                <div>
                    <label for="paid-by" class="block text-sm font-medium text-gray-700">Paid By</label>
                    <select id="paid-by" class="form-input mt-1" required>
                        <option value="Mahmoud">Mahmoud (Leader)</option>
                        <option value="Hamza">Hamza (Co-leader)</option>
                    </select>
                </div>
                <div class="md:col-span-4 text-right">
                     <button type="submit" class="btn-primary w-full md:w-auto mt-4">Add Expense</button>
                </div>
            </form>
        </div>

        <!-- Expense Table -->
        <div class="bg-white rounded-lg shadow-md overflow-x-auto">
            <table class="w-full text-sm text-left text-gray-500">
                <thead class="text-xs text-gray-700 uppercase table-header">
                    <tr>
                        <th scope="col" class="table-cell">Date</th>
                        <th scope="col" class="table-cell">Description</th>
                        <th scope="col" class="table-cell text-right">Amount</th>
                        <th scope="col" class="table-cell">Paid By</th>
                        <th scope="col" class="table-cell text-center">Actions</th>
                    </tr>
                </thead>
                <tbody id="expense-table-body">
                    <!-- Example Row -->
                    <tr class="bg-white border-b">
                        <td class="table-cell">2024-07-31</td>
                        <td class="table-cell font-medium text-gray-900">Initial Software Subscription</td>
                        <td class="table-cell text-right">$150.00</td>
                        <td class="table-cell">
                            <span class="px-2 py-1 font-semibold leading-tight text-indigo-700 bg-indigo-100 rounded-full">Mahmoud</span>
                        </td>
                         <td class="table-cell text-center">
                            <button class="text-red-500 hover:text-red-700 font-medium" onclick="deleteRow(this)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // DOM Elements
        const expenseForm = document.getElementById('expense-form');
        const expenseTableBody = document.getElementById('expense-table-body');
        const totalSpentEl = document.getElementById('total-spent');
        const mahmoudTotalEl = document.getElementById('mahmoud-total');
        const hamzaTotalEl = document.getElementById('hamza-total');

        // Initial Data (can be loaded from localStorage or a server)
        let expenses = [
            { date: '2024-07-31', description: 'Initial Software Subscription', amount: 150.00, paidBy: 'Mahmoud' }
        ];

        // --- Functions ---

        /**
         * Renders all expenses to the table and updates summaries.
         */
        function render() {
            // Clear existing table rows
            expenseTableBody.innerHTML = '';

            if (expenses.length === 0) {
                 expenseTableBody.innerHTML = '<tr><td colspan="5" class="text-center py-10 text-gray-500">No expenses recorded yet.</td></tr>';
            } else {
                // Add new rows from the expenses array
                expenses.forEach((expense, index) => {
                    const row = document.createElement('tr');
                    row.className = 'bg-white border-b';
                    row.innerHTML = `
                        <td class="table-cell">${expense.date}</td>
                        <td class="table-cell font-medium text-gray-900">${escapeHTML(expense.description)}</td>
                        <td class="table-cell text-right">$${expense.amount.toFixed(2)}</td>
                        <td class="table-cell">
                            <span class="px-2 py-1 font-semibold leading-tight ${expense.paidBy === 'Mahmoud' ? 'text-indigo-700 bg-indigo-100' : 'text-emerald-700 bg-emerald-100'} rounded-full">
                                ${escapeHTML(expense.paidBy)}
                            </span>
                        </td>
                        <td class="table-cell text-center">
                            <button class="text-red-500 hover:text-red-700 font-medium" onclick="deleteRowByIndex(${index})">Delete</button>
                        </td>
                    `;
                    expenseTableBody.appendChild(row);
                });
            }

            updateSummary();
        }

        /**
         * Updates the summary cards with the latest totals.
         */
        function updateSummary() {
            const totalSpent = expenses.reduce((sum, exp) => sum + exp.amount, 0);
            const mahmoudTotal = expenses
                .filter(exp => exp.paidBy === 'Mahmoud')
                .reduce((sum, exp) => sum + exp.amount, 0);
            const hamzaTotal = expenses
                .filter(exp => exp.paidBy === 'Hamza')
                .reduce((sum, exp) => sum + exp.amount, 0);

            totalSpentEl.textContent = `$${totalSpent.toFixed(2)}`;
            mahmoudTotalEl.textContent = `$${mahmoudTotal.toFixed(2)}`;
            hamzaTotalEl.textContent = `$${hamzaTotal.toFixed(2)}`;
        }

        /**
         * Handles the form submission to add a new expense.
         * @param {Event} e - The form submission event.
         */
        function addExpense(e) {
            e.preventDefault();

            const dateInput = document.getElementById('date');
            const descriptionInput = document.getElementById('description');
            const amountInput = document.getElementById('amount');
            const paidByInput = document.getElementById('paid-by');

            // Basic validation
            if (!dateInput.value || !descriptionInput.value || !amountInput.value) {
                // In a real app, show a more user-friendly message
                console.error("All fields are required.");
                return;
            }

            const newExpense = {
                date: dateInput.value,
                description: descriptionInput.value,
                amount: parseFloat(amountInput.value),
                paidBy: paidByInput.value
            };

            expenses.push(newExpense);
            
            // Sort expenses by date, most recent first
            expenses.sort((a, b) => new Date(b.date) - new Date(a.date));

            render();

            // Reset form fields
            expenseForm.reset();
        }
        
        /**
         * Deletes a row from the table and the expenses array by its index.
         * @param {number} index - The index of the expense to delete.
         */
        window.deleteRowByIndex = function(index) {
            expenses.splice(index, 1);
            render();
        }
        
        /**
         * A simple utility to escape HTML to prevent XSS.
         * @param {string} str - The string to escape.
         * @returns {string} The escaped string.
        */
        function escapeHTML(str) {
            const div = document.createElement('div');
            div.appendChild(document.createTextNode(str));
            return div.innerHTML;
        }

        // --- Event Listeners ---
        expenseForm.addEventListener('submit', addExpense);
        
        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set default date to today
            document.getElementById('date').valueAsDate = new Date();
            // Initial render of the data
            render();
        });
    </script>

</body>
</html>
